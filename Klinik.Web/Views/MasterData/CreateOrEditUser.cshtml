@model Klinik.Entities.MasterData.UserModel

@{
    ViewBag.Title = "CreateOrEditUser";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="~/Content/css/select2.css" rel="stylesheet" />
<link href="~/Content/jquery-ui.css" rel="stylesheet" />
<script src="~/Scripts/select2.js"></script>
<script src="~/Scripts/jquery-ui.js"></script>

<section class="panel">
    <header class="panel-heading">
        <div class="panel-actions">
            <a href="#" class="fa fa-caret-down"></a>
        </div>
        <h5 class="panel-title">Form @ViewBag.ActionType User</h5>
    </header>
    <div class="panel-body">
        <form class="form-horizontal form-bordered" method="post" action="/MasterData/CreateOrEditUser">
            <div class="form-group">
                <label class="col-md-2 control-label" for="inputDefault">Organization</label>
                <div class="col-md-4">
                    @Html.HiddenFor(x => x.Id)
                    @Html.DropDownListFor(p => p.OrgID, (IEnumerable<SelectListItem>)ViewBag.Organisasi, new { @class = "form-control", @id = "ddlorganisasi" })
                    @Html.ValidationMessageFor(m => m.OrgID, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label" for="inputDefault">Employee</label>
                <div class="col-md-4">

                    @Html.DropDownListFor(p => p.EmployeeID, (IEnumerable<SelectListItem>)ViewBag.Employees, new { @class = "form-control", @id = "ddlemployee" })
                    @Html.ValidationMessageFor(m => m.OrgID, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-2 control-label" for="inputDefault">UserName</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.UserName, new { @class = "form-control", @id = "tbUsrName" })
                    @Html.ValidationMessageFor(m => m.UserName, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-2 control-label" for="inputDefault">
                    Password
                </label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.Password, new { @class = "form-control", @id = "tbUsrName", @type = "password" })
                    @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-2 control-label" for="inputDefault">
                    Expired Date
                </label>
                <div class="col-md-4">
                    @Html.TextBoxFor(x => x.ExpiredDate, new { @class = "form-control", @id = "tbExpDate" })

                </div>
            </div>

            <div class="form-group">
                <label class="col-md-2 control-label" for="inputDefault">
                    Status
                </label>
                <div class="col-md-4">
                    @Html.CheckBoxFor(x => x.Status, new { @class = "form-check-input", @id = "cbStatus" })

                </div>
            </div>


            <br />
            <footer class="panel-footer">
                <button type="submit" class="btn btn-primary">Simpan </button>
                <button type="reset" id="btnreset" class="btn btn-default">Kembali</button>
            </footer>
        </form>
    </div>
</section>

<script type="text/javascript">
    $(document).ready(function () {
        $('#btnreset').click(function (e) {
             window.location.href = "/MasterData/UserList";
        });

        $('#ddlorganisasi').select2();
        $('#ddlemployee').select2();
        $('#tbExpDate').datepicker({
            changeMonth: true,
            changeYear: true
        });
    var _status, _message, _temp;
    var _arrMsg = [];

        toastr.options = {
            "closeButton": true,
            "positionClass": "toast-top-full-width",
            "onclick": null,
            "showDuration": "0",
            "hideDuration": "0",
            "timeOut": "0",
            "showMethod": "fadeIn"
        };

    _temp="@ViewBag.Response";

    _arrMsg = _temp.split(";");

    if (_arrMsg[0] == "SUCCESS") {
        toastr.success(_arrMsg[1]);
    }
    else if (_arrMsg[0] == "ERROR") {
        toastr.error(_arrMsg[1]);
    }
    });

</script>