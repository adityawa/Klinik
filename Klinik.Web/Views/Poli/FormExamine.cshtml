@model Klinik.Entities.Poli.PoliExamineModel

@using Klinik.Entities.Account;

@{
    Layout = "";
}

<html class="fixed">
<head>
    <!-- Basic -->
    <title>@Klinik.Resources.UIMessages.HomepageTitle</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="Sistem Klinik Online" />
    <meta name="description" content="Medical Management System">
    <meta name="author" content="CV Mandiri">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="~/Content/images/favicon.ico" />

    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <!-- Web Fonts  -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800|Shadows+Into+Light" rel="stylesheet" type="text/css">

    <!-- Vendor CSS -->
    <link href="~/Content/Octopus/assets/vendor/bootstrap/css/bootstrap.css" rel="stylesheet" />
    <link href="~/Content/Octopus/assets/vendor/bootstrap-datepicker/css/datepicker3.css" rel="stylesheet" />
    <link href="~/Content/Octopus/assets/vendor/jquery-ui/css/ui-lightness/jquery-ui-1.10.4.custom.css" rel="stylesheet" />
    <link href="~/Content/Octopus/assets/vendor/bootstrap-multiselect/bootstrap-multiselect.css" rel="stylesheet" />
    <link href="~/Content/Octopus/assets/vendor/select2/select2.css" rel="stylesheet" />
    <link href="~/Content/Octopus/assets/vendor/jquery-datatables-bs3/assets/css/datatables.css" rel="stylesheet" />
    <link href="~/Content/Octopus/assets/vendor/magnific-popup/magnific-popup.css" rel="stylesheet" />

    <!-- Nuget CSS -->
    <link href="~/Content/font-awesome.css" rel="stylesheet" />
    <link href="~/Content/toastr.css" rel="stylesheet" />

    <!-- Theme CSS -->
    <link href="~/Content/Octopus/assets/stylesheets/theme.css" rel="stylesheet" />
    <link href="~/Content/Octopus/assets/stylesheets/skins/default.css" rel="stylesheet" />
    <link href="~/Content/Octopus/assets/stylesheets/theme-custom.css" rel="stylesheet" />
    <link href="~/Scripts/medica/jquery-ui.css" rel="stylesheet" />

    <!-- Head Libraries -->
    <script src="~/Scripts/jquery-3.0.0.js"></script>
    <script src="~/Content/Octopus/assets/vendor/Modernizr/modernizr.js"></script>
    <script src="~/Scripts/toastr.js"></script>

</head>
<body>
    <section class="body">
        <!-- start: header -->
        <header class="header">
            <div class="logo-container">
                <a href="/Home/Index" class="logo">
                    <img src="~/Content/images/logo-medica.png" height="35" alt="JSOFT Admin" />
                </a>

                <div class="visible-xs toggle-sidebar-left" data-toggle-class="sidebar-left-opened" data-target="html" data-fire-event="sidebar-left-opened">
                    <i class="fa fa-bars" aria-label="Toggle sidebar"></i>
                </div>
            </div>

            <div class="header-right">
                <span class="separator"></span>

                <div id="userbox" class="userbox">
                    <a href="#" data-toggle="dropdown">
                        <figure class="profile-picture">
                            <img src="~/Content/Octopus/assets/images/!logged-user.jpg" alt="Joseph Doe" class="img-circle" data-lock-picture="assets/images/!logged-user.jpg" />
                        </figure>
                        <div class="profile-info">
                            @{
                                if (Session["UserLogon"] != null)
                                {
                                    AccountModel account = (AccountModel)Session["UserLogon"];
                                    <span class="name">@account.UserName</span>
                                }
                            }
                        </div>

                        <i class="fa custom-caret"></i>
                    </a>

                    <div class="dropdown-menu">
                        <ul class="list-unstyled">
                            <li class="divider"></li>
                            <li>
                                <a role="menuitem" tabindex="-1" href="@Url.Action("ChangePassword","PasswordHistory")"><i class="fa fa-key"></i>@Klinik.Resources.UIMessages.ChangePassword </a>
                            </li>
                            <li>
                                <a role="menuitem" tabindex="-1" href="@Url.Action("Logout","Account")"><i class="fa fa-power-off"></i>@Klinik.Resources.UIMessages.Logout</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

        </header>
        <!-- end: header -->

        <div class="inner-wrapper">
            <!-- start: sidebar -->
            <aside id="sidebar-left" class="sidebar-left">

                <div class="sidebar-header">
                    <div class="sidebar-title">
                        @Klinik.Resources.UIMessages.Navigation
                    </div>
                    <div class="sidebar-toggle hidden-xs" data-toggle-class="sidebar-left-collapsed" data-target="html" data-fire-event="sidebar-left-toggle">
                        <i class="fa fa-bars" aria-label="Toggle sidebar" id="navbartoggle"></i>
                    </div>
                </div>

                <div class="nano">
                    <div class="nano-content">
                        <div class="col-md-12">
                            <section class="panel">
                                <header class="panel-heading">
                                    <h2 class="panel-title">@Klinik.Resources.UIMessages.PatientData</h2>
                                </header>
                                <div class="panel-body">
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="control-label">@Klinik.Resources.UIMessages.Name</label>
                                            <input type="text" class="form-control" readOnly value="@Model.LoketData.PatientName">
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="control-label">@Klinik.Resources.UIMessages.Address</label>
                                            <input type="url" class="form-control" readOnly value="@Model.LoketData.PatientAddress">
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="control-label">@Klinik.Resources.UIMessages.Birthdate</label>
                                            <input type="url" class="form-control" readOnly value="@Model.LoketData.PatientBirthDateStr">
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="control-label">@Klinik.Resources.UIMessages.Age</label>
                                            <input type="url" class="form-control" readOnly value="@Model.PatientAge">
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="control-label">@Klinik.Resources.UIMessages.Gender</label>
                                            <input type="url" class="form-control" readOnly value="@Model.LoketData.PatientGender">
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="control-label">@Klinik.Resources.UIMessages.Necessity</label>
                                            <input type="url" class="form-control" readOnly value="@Model.NecessityTypeStr">
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="control-label">@Klinik.Resources.UIMessages.PaymentType</label>
                                            <input type="url" class="form-control" readOnly value="@Model.PaymentTypeStr">
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            <label class="control-label">@Klinik.Resources.UIMessages.HPNumber</label>
                                            <input type="url" class="form-control" readOnly value="@Model.LoketData.PatientHPNumber">
                                        </div>
                                    </div>
                                </div>
                                <footer class="panel-footer">
                                    <button class="btn btn-danger btn-block" onclick="location.href='@Url.Action("PatientList", "Poli")'">@Klinik.Resources.UIMessages.Back</button>
                                </footer>
                            </section>
                        </div>
                    </div>
                </div>
            </aside>
            <!-- end: sidebar -->

            <section role="main" class="content-body">
                <header class="page-header">
                    <div class="right-wrapper pull-right">
                        <ol class="breadcrumbs">
                            <li>
                                <a href="/Home/Index">
                                    <i class="fa fa-home"></i>
                                </a>
                            </li>
                            <li><span>@Klinik.Resources.UIMessages.Dashboard</span></li>
                        </ol>
                    </div>
                </header>
                <div>
                    @if (Model.PreExamineData.Id > 0)
                    {
                        <div class="col-md-12">
                            <section class="panel" data-toggle="collapse">
                                <div></div>
                                <header class="panel-heading">
                                    <div class="panel-actions">
                                        <a href="#" class="fa fa-caret-down"></a>
                                    </div>
                                    <div>
                                        <h5 class="panel-title">
                                            @Klinik.Resources.UIMessages.FormPreExamine
                                        </h5>
                                    </div>
                                </header>
                                <div class="panel-body">
                                    <div class="form-group">
                                        <label class="col-md-1 control-label" for="inputDefault">@Klinik.Resources.UIMessages.FormMedical</label>
                                        @Html.HiddenFor(x => x.Id)
                                        @Html.HiddenFor(x => x.LoketData.Id)
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.FormMedicalID, new { @class = "form-control", @id = "tbFormMedical", @readonly = "readonly" })
                                        </div>
                                        <label class="col-md-1 control-label" for="inputDefault">@Klinik.Resources.UIMessages.TransactionDate</label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.strTransDate, new { @class = "form-control", @id = "tbTransDate", @readonly = "readonly" })
                                        </div>
                                        <label class="col-md-1 control-label " for="inputDefault" style="text-align:left">
                                            @Klinik.Resources.UIMessages.Doctor
                                        </label>
                                        <div class="col-md-3">
                                            @Html.TextBoxFor(x => x.PreExamineData.DoctorName, new { @class = "form-control", @id = "tbDoctorPreExamine", @readonly = "readonly" })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-1 control-label" for="inputDefault">@Klinik.Resources.UIMessages.Temperature</label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.Temperature, new { @class = "form-control", @id = "tbTemperature" })
                                        </div>
                                        <label class="col-md-1 control-label" for="inputDefault">@Klinik.Resources.UIMessages.Weight</label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.Weight, new { @class = "form-control", @id = "tbWeight" })
                                        </div>
                                        <label class="col-md-1 control-label" for="inputDefault">
                                            @Klinik.Resources.UIMessages.Height
                                        </label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.Height, new { @class = "form-control", @id = "tbHeight" })
                                        </div>

                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-1 control-label" for="inputDefault">@Klinik.Resources.UIMessages.Respiratory</label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.Respiratory, new { @class = "form-control", @id = "tbRespiratory" })
                                        </div>
                                        <label class="col-md-1 control-label" for="inputDefault">@Klinik.Resources.UIMessages.Diastolic</label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.Diastolic, new { @class = "form-control", @id = "tbDiastolic" })
                                        </div>

                                        <label class="col-md-1 control-label" for="inputDefault">
                                            @Klinik.Resources.UIMessages.Systolic
                                        </label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.Systolic, new { @class = "form-control", @id = "tbSystolic" })
                                        </div>
                                        <label class="col-md-1 control-label" for="inputDefault" id="lblNomor">
                                            @Klinik.Resources.UIMessages.DailyGlasses
                                        </label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.DailyGlasses, new { @class = "form-control", @id = "tbDailyGlasses" })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-1 control-label" for="inputDefault">@Klinik.Resources.UIMessages.Pulse</label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.Pulse, new { @class = "form-control", @id = "tbPulse" })
                                        </div>
                                        <label class="col-md-1 control-label" for="inputDefault">@Klinik.Resources.UIMessages.LeftEye</label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.LeftEye, new { @class = "form-control", @id = "tbLeftEye" })
                                        </div>
                                        <label class="col-md-1 control-label" for="inputDefault">
                                            @Klinik.Resources.UIMessages.RightEye
                                        </label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.RightEye, new { @class = "form-control", @id = "tbRightEye" })
                                        </div>
                                        <label class="col-md-1 control-label" for="inputDefault" id="lblNomor">
                                            @Klinik.Resources.UIMessages.ExamineGlasses
                                        </label>
                                        <div class="col-md-2">
                                            @Html.TextBoxFor(x => x.PreExamineData.ExamineGlasses, new { @class = "form-control", @id = "tbExamineGlasses" })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-1 control-label" for="inputDefault">@Klinik.Resources.UIMessages.Others</label>
                                        <div class="col-md-5">
                                            @Html.TextAreaFor(x => x.PreExamineData.Others, new { @class = "form-control", @id = "tbOthers" })
                                        </div>
                                        @if (Model.LoketData.PatientGender.Equals("Female"))
                                        {
                                            <label class="col-md-1 control-label" for="inputDefault">
                                                @Klinik.Resources.UIMessages.MenstrualDate
                                            </label>
                                            <div class="col-md-2">
                                                @Html.TextBoxFor(x => x.PreExamineData.strMenstrualDate, new { @class = "form-control", @id = "tbMenstrualDate" })
                                            </div>
                                            <label class="col-md-1 control-label" for="inputDefault" id="lblNomor">
                                                @Klinik.Resources.UIMessages.KBDate
                                            </label>
                                            <div class="col-md-2">
                                                @Html.TextBoxFor(x => x.PreExamineData.strKBDate, new { @class = "form-control", @id = "tbKBDate" })
                                            </div>
                                        }
                                    </div>
                                </div>
                            </section>
                        </div>
                    }
                    <div class="col-md-12">
                        <section class="panel">
                            <header class="panel-heading">
                                <div class="panel-actions">
                                    <a href="#" class="fa fa-caret-down"></a>
                                </div>
                                <div>
                                    <h5 class="panel-title">
                                        @Klinik.Resources.UIMessages.FormExamine
                                    </h5>
                                </div>
                            </header>
                            <div class="panel-body">
                                @Html.HiddenFor(x => x.Id, new { @id = "formExamineID" })
                                @Html.HiddenFor(x => x.LoketData.Id, new { @id = "loketID" })
                                <div class="tabs">
                                    <ul class="nav nav-tabs nav-justified">
                                        <li class="active">
                                            <a href="#tabBasicExamine" data-toggle="tab" class="text-center">@Klinik.Resources.UIMessages.Examine</a>
                                        </li>
                                        <li>
                                            <a href="#tabMedicine" data-toggle="tab" class="text-center">@Klinik.Resources.UIMessages.Medicine</a>
                                        </li>
                                        <li>
                                            <a href="#tabService" data-toggle="tab" class="text-center">@Klinik.Resources.UIMessages.Service</a>
                                        </li>
                                        <li>
                                            <a href="#tabLab" data-toggle="tab" class="text-center">@Klinik.Resources.UIMessages.Laboratory</a>
                                        </li>
                                        <li>
                                            <a href="#tabRadiologi" data-toggle="tab" class="text-center">@Klinik.Resources.UIMessages.Radiology</a>
                                        </li>

                                        <li>
                                            <a href="#tabICD" data-toggle="tab" class="text-center">@Klinik.Resources.UIMessages.ICDInformation</a>
                                        </li>

                                        <li>
                                            <a href="#tabResult" data-toggle="tab" class="text-center">@Klinik.Resources.UIMessages.Result</a>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        <div id="tabBasicExamine" class="tab-pane active">
                                            <label>@Klinik.Resources.UIMessages.Anamnesa</label>
                                            @Html.TextAreaFor(x => x.ExamineData.Anamnesa, new { @class = "form-control", @id = "txtAnamnesa", @required = "", @tabindex = "1", @rows = "4" })
                                            <label>@Klinik.Resources.UIMessages.Diagnose</label>
                                            @Html.TextAreaFor(x => x.ExamineData.Diagnose, new { @class = "form-control", @id = "txtDiagnose", @required = "", @tabindex = "2", @rows = "4" })
                                            <label>@Klinik.Resources.UIMessages.Theraphy</label>
                                            @Html.TextAreaFor(x => x.ExamineData.Therapy, new { @class = "form-control", @id = "txtTherapy", @tabindex = "3", @rows = "4" })
                                        </div>
                                        <div id="tabMedicine" class="tab-pane">

                                            <div class="row">
                                                <div class="col-md-12">
                                                    <button type="button" class="btn btn-primary btn-block disabled">@Klinik.Resources.UIMessages.ConcoctionMedicine</button>
                                                </div>
                                            </div>
                                            <table class="table table-striped table-bordered dt-responsive" id="tblConcMedicine">
                                                <thead>
                                                    <tr style="font-size:13px">
                                                        <th style="width:35%">@Klinik.Resources.UIMessages.MedicineName</th>
                                                        <th style="width:10%">@Klinik.Resources.UIMessages.Type</th>
                                                        <th style="width:13%">@Klinik.Resources.UIMessages.Dose</th>
                                                        <th style="width:10%">@Klinik.Resources.UIMessages.Amount</th>
                                                        <th style="width:17%">@Klinik.Resources.UIMessages.RemarkUse</th>
                                                        <th style="width:10%">@Klinik.Resources.UIMessages.Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody style="font-size:13px">
                                                    @foreach (var item in Model.MedicineDataList.Where(x => x.TypeID == "3").ToList())
                                                    {
                                                        <tr>
                                                            <td style="display: none;">
                                                                @Html.DisplayFor(modelItem => item.Id)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.ConcoctionMedicine)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.MedicineJenis)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Dose)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Qty)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.RemarkUse)
                                                            </td>
                                                            <td></td>
                                                        </tr>
                                                    }
                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        <td>
                                                            <input id="Conc_medicineName" type="text" class="form-control" placeholder="@Klinik.Resources.UIMessages.TypeMedicineNameHere" />
                                                            <input hidden type="text" id="Conc_idMedicine" />
                                                        </td>
                                                        <td>
                                                            <select class="form-control" id="Conc_medicineJenis">
                                                                <option value="Non racikan">Non Racikan</option>
                                                                <option value="Racikan">Racikan</option>
                                                            </select>
                                                        </td>
                                                        <td><input id="Conc_medicineDose" type="text" class="form-control" /></td>
                                                        <td><input id="Conc_medicineAmount" type="text" class="form-control" /></td>
                                                        <td>
                                                            <select class="form-control" id="Conc_medicineRemarkUse">
                                                                <option value="Sebelum Makan">Sebelum Makan</option>
                                                                <option value="Sesudah Makan">Sesudah Makan</option>
                                                            </select>
                                                        </td>
                                                        <td><input type="button" id="btnAdd_ConcMedicine" value="@Klinik.Resources.UIMessages.Add" /></td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                            <div><br /></div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <button type="button" class="btn btn-primary btn-block disabled">@Klinik.Resources.UIMessages.MedicineList</button>
                                                </div>
                                            </div>
                                            <table class="table table-striped table-bordered dt-responsive" id="table-medicine">
                                                <thead>
                                                    <tr style="font-size:13px">
                                                        <th style="width:45%">@Klinik.Resources.UIMessages.MedicineName</th>
                                                        <th style="width:10%">@Klinik.Resources.UIMessages.Stock</th>
                                                        <th style="width:13%">@Klinik.Resources.UIMessages.Dose</th>
                                                        <th style="width:10%">@Klinik.Resources.UIMessages.Amount</th>
                                                        <th style="width:17%">@Klinik.Resources.UIMessages.RemarkUse</th>
                                                        <th style="width:10%">@Klinik.Resources.UIMessages.Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody style="font-size:13px">
                                                    @foreach (var item in Model.MedicineDataList.Where(x => x.TypeID == "1"))
                                                    {
                                                        <tr>
                                                            <td style="display: none;">
                                                                @Html.DisplayFor(modelItem => item.Id)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.ProductName)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Stock)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Dose)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Qty)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.RemarkUse)
                                                            </td>
                                                            <td></td>
                                                        </tr>
                                                    }
                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        <td>
                                                            <input id="medicineName" type="text" class="form-control" placeholder="@Klinik.Resources.UIMessages.TypeMedicineNameHere" />
                                                            <input hidden type="text" id="idMedicine" />
                                                        </td>
                                                        <td><input id="medicineStock" type="text" class="form-control" disabled /></td>
                                                        <td><input id="medicineDose" type="text" class="form-control" /></td>
                                                        <td><input id="medicineAmount" type="text" class="form-control" /></td>
                                                        <td>
                                                            <select class="form-control" id="medicineRemarkUse">
                                                                <option value="Sebelum Makan">Sebelum Makan</option>
                                                                <option value="Sesudah Makan">Sesudah Makan</option>
                                                            </select>
                                                        </td>
                                                        <td><input type="button" id="btnAddMedicine" value="@Klinik.Resources.UIMessages.Add" /></td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <button type="button" class="btn btn-primary btn-block disabled">@Klinik.Resources.UIMessages.InjectionList</button>
                                                </div>
                                            </div>
                                            <table class="table table-striped table-bordered dt-responsive" id="table-injection">
                                                <thead>
                                                    <tr style="font-size:13px">
                                                        <th style="width:50%">@Klinik.Resources.UIMessages.MedicineName</th>
                                                        <th>@Klinik.Resources.UIMessages.Stock</th>
                                                        <th>@Klinik.Resources.UIMessages.Volume</th>
                                                        <th style="width:7%">@Klinik.Resources.UIMessages.Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody style="font-size:13px">
                                                    @foreach (var item in Model.InjectionDataList)
                                                    {
                                                        <tr>
                                                            <td style="display: none;">
                                                                @Html.DisplayFor(modelItem => item.Id)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.ProductName)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Stock)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.RemarkUse)
                                                            </td>
                                                            <td></td>
                                                        </tr>
                                                    }
                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        <td><input id="medicineInjectionName" type="text" class="form-control" placeholder="@Klinik.Resources.UIMessages.TypeMedicineNameHere" /><input hidden type="text" id="idMedicineInjection" /></td>
                                                        <td><input id="medicineInjectionStock" type="text" class="form-control" disabled /></td>
                                                        <td><input id="medicineInjectionVolume" type="text" class="form-control" /></td>
                                                        <td><input type="button" id="btnAddMedicineInjection" value="@Klinik.Resources.UIMessages.Add" /></td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                        <div id="tabService" class="tab-pane">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <button type="button" class="btn btn-primary btn-block disabled">@Klinik.Resources.UIMessages.ServiceList</button>
                                                </div>
                                            </div>
                                            <table class="table table-striped table-bordered dt-responsive" id="table-service">
                                                <thead>
                                                    <tr style="font-size:13px">
                                                        <th style="width:50%">@Klinik.Resources.UIMessages.Service</th>
                                                        <th>@Klinik.Resources.UIMessages.Code</th>
                                                        <th>@Klinik.Resources.UIMessages.Price</th>
                                                        <th style="width:7%">@Klinik.Resources.UIMessages.Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody style="font-size:13px">
                                                    @foreach (var item in Model.DefaultServiceList)
                                                    {
                                                        <tr>
                                                            <td style="display: none;">
                                                                @Html.DisplayFor(modelItem => item.Id)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Name)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Code)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Price)
                                                            </td>
                                                            <td></td>
                                                        </tr>
                                                    }
                                                    @foreach (var item in Model.ServiceDataList)
                                                    {
                                                        <tr>
                                                            <td style="display: none;">
                                                                @Html.DisplayFor(modelItem => item.Id)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Service.Name)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Service.Code)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Service.Price)
                                                            </td>
                                                            <td></td>
                                                        </tr>
                                                    }
                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        <td><input id="serviceName" type="text" class="form-control" placeholder="@Klinik.Resources.UIMessages.TypeServiceNameHere" /><input hidden type="text" id="idService" /></td>
                                                        <td><input id="serviceCode" type="text" class="form-control" disabled /></td>
                                                        <td><input id="servicePrice" type="text" class="form-control" disabled /></td>
                                                        <td><input type="button" id="btnAddService" value="@Klinik.Resources.UIMessages.Add" /></td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                        <div id="tabLab" class="tab-pane">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <button type="button" class="btn btn-primary btn-block disabled">@Klinik.Resources.UIMessages.LaboratList</button>
                                                </div>
                                            </div>
                                            <table class="table table-striped table-bordered dt-responsive" id="table-lab">
                                                <thead>
                                                    <tr style="font-size:13px">
                                                        <th style="width:50%">@Klinik.Resources.UIMessages.Laboratory</th>
                                                        <th>@Klinik.Resources.UIMessages.Result</th>
                                                        <th style="width:7%">@Klinik.Resources.UIMessages.Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody style="font-size:13px">
                                                    @foreach (var item in Model.LabDataList)
                                                    {
                                                        <tr>
                                                            <td style="display: none;">
                                                                @Html.DisplayFor(modelItem => item.Id)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.LabItemDesc)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Result)
                                                            </td>
                                                            <td></td>
                                                        </tr>
                                                    }
                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        <td><input id="laboratName" type="text" class="form-control" placeholder="@Klinik.Resources.UIMessages.TypeLabNameHere" /><input hidden type="text" id="idLaborat" /></td>
                                                        <td><input id="laboratResult" type="text" class="form-control" disabled /></td>
                                                        <td><input type="button" id="btnAddLab" value="@Klinik.Resources.UIMessages.Add" /></td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                        <div id="tabRadiologi" class="tab-pane">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <button type="button" class="btn btn-primary btn-block disabled">@Klinik.Resources.UIMessages.RadiologyList</button>
                                                </div>
                                            </div>
                                            <table class="table table-striped table-bordered dt-responsive" id="table-radiology">
                                                <thead>
                                                    <tr style="font-size:13px">
                                                        <th style="width:50%">@Klinik.Resources.UIMessages.Radiology</th>
                                                        <th>@Klinik.Resources.UIMessages.Result</th>
                                                        <th>@Klinik.Resources.UIMessages.Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody style="font-size:13px">
                                                    @foreach (var item in Model.RadiologyDataList)
                                                    {
                                                        <tr>
                                                            <td style="display: none;">
                                                                @Html.DisplayFor(modelItem => item.Id)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.LabItemDesc)
                                                            </td>
                                                            <td>
                                                                @Html.DisplayFor(modelItem => item.Result)
                                                            </td>
                                                            <td></td>
                                                        </tr>
                                                    }
                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        <td><input id="radiologyName" type="text" class="form-control" placeholder="@Klinik.Resources.UIMessages.TypeRadiologyNameHere" /><input hidden type="text" id="idRadiology" /></td>
                                                        <td><input id="radiologyResult" type="text" class="form-control" disabled /></td>
                                                        <td><input type="button" id="btnAddRadiology" value="@Klinik.Resources.UIMessages.Add" /></td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                        <div id="tabICD" class="tab-pane">
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <div class="row text-right">
                                                        <div class="form-group col-md-6">
                                                            <label class="control-label">@Klinik.Resources.UIMessages.ICDInformation1</label>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            @Html.DropDownListFor(p => p.ICDInformation1, (IEnumerable<SelectListItem>)ViewBag.ICDInfo, new { @class = "form-control", @id = "ddlicd1" })
                                                        </div>
                                                    </div>

                                                    <div class="row text-right">
                                                        <div class="form-group col-md-6">
                                                            <label class="control-label">@Klinik.Resources.UIMessages.ICDInformation2</label>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            @Html.DropDownListFor(p => p.ICDInformation2, (IEnumerable<SelectListItem>)ViewBag.ICDInfo, new { @class = "form-control", @id = "ddlicd2" })
                                                        </div>
                                                    </div>

                                                    <div class="row text-right">
                                                        <div class="form-group col-md-6">
                                                            <label class="control-label">@Klinik.Resources.UIMessages.ICDInformation3</label>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            @Html.DropDownListFor(p => p.ICDInformation3, (IEnumerable<SelectListItem>)ViewBag.ICDInfo, new { @class = "form-control", @id = "ddlicd3" })
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                        </div>
                                        <div id="tabResult" class="tab-pane">
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <div class="row text-right">
                                                        <div class="form-group col-md-6">
                                                            <label class="control-label">@Klinik.Resources.UIMessages.FinalState</label>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            @Html.DropDownListFor(p => p.ExamineData.Result, (IEnumerable<SelectListItem>)ViewBag.FinalStateList, new { @class = "form-control", @id = "ddlfinalstate" })
                                                        </div>
                                                    </div>

                                                    <div class="row text-right">
                                                        <div class="form-group col-md-6">
                                                            <label class="control-label">@Klinik.Resources.UIMessages.NeedSuratSakit</label>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            @Html.CheckBoxFor(p => p.ExamineData.NeedSuratSakit, new { @class = "form-control", @id = "cbNeedSurat" })
                                                        </div>
                                                    </div>
                                                    <div class="row text-right">
                                                        <div class="form-group col-md-6">
                                                            <label class="control-label">@Klinik.Resources.UIMessages.JumHari</label>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            @Html.TextBoxFor(p => p.ExamineData.JumHari, new { @class = "form-control", @id = "tbJumHari" })
                                                        </div>
                                                    </div>

                                                    <div class="row text-right">
                                                        <div class="form-group col-md-6">
                                                            <label class="control-label">@Klinik.Resources.UIMessages.Caused</label>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            @Html.DropDownListFor(p => p.ExamineData.Caused, (IEnumerable<SelectListItem>)ViewBag.CausedList, new { @class = "form-control", @id = "ddlcaused" })
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="form-group col-md-6">

                                                    <div class="row text-right">
                                                        <div class="form-group col-md-6">
                                                            <label class="control-label">@Klinik.Resources.UIMessages.Condition</label>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            @Html.DropDownListFor(p => p.ExamineData.Condition, (IEnumerable<SelectListItem>)ViewBag.ConditionList, new { @class = "form-control", @id = "ddlcondition" })
                                                        </div>
                                                    </div>

                                                    <div class="row text-right">
                                                        <div class="form-group col-md-6">
                                                            <label class="control-label">@Klinik.Resources.UIMessages.ForwardTo</label>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            @Html.DropDownListFor(p => p.PoliToID, (IEnumerable<SelectListItem>)ViewBag.PoliList, new { @class = "form-control", @id = "ddlpolito" })
                                                        </div>
                                                    </div>
                                                    <div class="row text-right">
                                                        <div class="form-group col-md-6">
                                                            <label class="control-label" id="lbDoctor">@Klinik.Resources.UIMessages.Doctor</label>
                                                        </div>
                                                        <div class="col-md-6">
                                                            @Html.DropDownListFor(p => p.DoctorToID, (IEnumerable<SelectListItem>)ViewBag.DoctorList, new { @class = "form-control", @id = "ddldoctor" })
                                                        </div>
                                                    </div>
                                                    <div><br /></div>
                                                    <div class="row">
                                                        <div class="form-group col-md-6"></div>
                                                        <div class="form-group col-md-6">
                                                            <button type="submit" class="btn btn-success btn-block" id="btnSave">Finish Examine</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </section>
        </div>
    </section>

    <div id="dialog" class="modal-block mfp-hide">
        <section class="panel">
            <header class="panel-heading">
                <h2 class="panel-title">@Klinik.Resources.UIMessages.AreYouSure</h2>
            </header>
            <div class="panel-body">
                <div class="modal-wrapper">
                    <div class="modal-text">
                        <p>@Klinik.Resources.UIMessages.AreYouSureDelete</p>
                    </div>
                </div>
            </div>
            <footer class="panel-footer">
                <div class="row">
                    <div class="col-md-12 text-right">
                        <button id="dialogConfirm" class="btn btn-primary">Confirm</button>
                        <button id="dialogCancel" class="btn btn-default">Cancel</button>
                    </div>
                </div>
            </footer>
        </section>
    </div>

    <!-- Specific Page Vendor -->

    <script src="~/Content/Octopus/assets/vendor/jquery-datatables/media/js/jquery.dataTables.js"></script>
    <script src="~/Content/Octopus/assets/vendor/jquery-datatables/extras/TableTools/js/dataTables.tableTools.min.js"></script>
    <script src="~/Content/Octopus/assets/vendor/jquery-datatables-bs3/assets/js/datatables.js"></script>
    <script src="~/Content/Octopus/assets/vendor/magnific-popup/magnific-popup.js"></script>

    <!-- Vendor -->
    <script src="~/Content/Octopus/assets/vendor/jquery-browser-mobile/jquery.browser.mobile.js"></script>
    <script src="~/Content/Octopus/assets/vendor/bootstrap/js/bootstrap.js"></script>
    <script src="~/Content/Octopus/assets/vendor/nanoscroller/nanoscroller.js"></script>
    <script src="~/Content/Octopus/assets/vendor/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
    <script src="~/Content/Octopus/assets/vendor/jquery-placeholder/jquery.placeholder.js"></script>
    <script src="~/Content/Octopus/assets/vendor/jquery-ui/js/jquery-ui-1.10.4.custom.js"></script>
    <script src="~/Content/Octopus/assets/vendor/bootstrap-multiselect/bootstrap-multiselect.js"></script>

    <!-- Theme -->
    <script src="~/Content/Octopus/assets/javascripts/theme.js"></script>
    <script src="~/Content/Octopus/assets/javascripts/theme.custom.js"></script>
    <script src="~/Content/Octopus/assets/javascripts/theme.init.js"></script>
    <script src="~/Scripts/medica/jquery-1.10.2.js"></script>
    <script src="~/Scripts/medica/jquery-ui.js"></script>
    <script src="~/Content/Octopus/assets/vendor/select2/select2.js"></script>
    <script type="text/javascript" lang="en">
        function Remove(button) {
            //Determine the reference of the Row using the Button.
            var row = $(button).closest("TR");
            var name = $("TD", row).eq(0).html();
            if (confirm("Do you want to delete: " + name)) {
                //Get the reference of the Table.
                var table = $("#table-medicine")[0];

                //Delete the Table row using it's Index.
                table.deleteRow(row[0].rowIndex);
            }
    };

    function RemoveConcMedicine(button) {
        //Determine the reference of the Row using the Button.
            var row = $(button).closest("TR");
            var name = $("TD", row).eq(0).html();
            if (confirm("Do you want to delete: " + name)) {
                //Get the reference of the Table.
                var table = $("#tblConcMedicine")[0];

                //Delete the Table row using it's Index.
                table.deleteRow(row[0].rowIndex);
            }
    };

        function RemoveInjection(button) {
            //Determine the reference of the Row using the Button.
            var row = $(button).closest("TR");
            var name = $("TD", row).eq(0).html();
            if (confirm("Do you want to delete: " + name)) {
                //Get the reference of the Table.
                var table = $("#table-injection")[0];

                //Delete the Table row using it's Index.
                table.deleteRow(row[0].rowIndex);
            }
        };

        function RemoveService(button) {
            //Determine the reference of the Row using the Button.
            var row = $(button).closest("TR");
            var name = $("TD", row).eq(0).html();
            if (confirm("Do you want to delete: " + name)) {
                //Get the reference of the Table.
                var table = $("#table-service")[0];

                //Delete the Table row using it's Index.
                table.deleteRow(row[0].rowIndex);
            }
        };

        function RemoveLab(button) {
            //Determine the reference of the Row using the Button.
            var row = $(button).closest("TR");
            var name = $("TD", row).eq(0).html();
            if (confirm("Do you want to delete: " + name)) {
                //Get the reference of the Table.
                var table = $("#table-lab")[0];

                //Delete the Table row using it's Index.
                table.deleteRow(row[0].rowIndex);
            }
        };

        function RemoveRadiology(button) {
            //Determine the reference of the Row using the Button.
            var row = $(button).closest("TR");
            var name = $("TD", row).eq(0).html();
            if (confirm("Do you want to delete: " + name)) {
                //Get the reference of the Table.
                var table = $("#table-radiology")[0];

                //Delete the Table row using it's Index.
                table.deleteRow(row[0].rowIndex);
            }
    };

    function getUrlVars() {
            var vars = [], hash;
            var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for (var i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                vars.push(hash[0]);
                vars[hash[0]] = hash[1];
            }
            return vars;
    }

    $(document).ready(function () {
            var _isViewOnly = getUrlVars()["IsViewOnly"];
            var medicine = $("#medicineName");
            if (!medicine.length) return;
        $('#ddlicd1').select2();
        $('#ddlicd2').select2();
        $('#ddlicd3').select2();
        $('#ddlcaused').select2();
        $('#ddlcondition').select2();
            $("#medicineName").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '/Poli/AutoCompleteMedicine/',
                        data: "{ 'prefix': '" + request.term + "'}",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        success: function (data) {
                            response($.map(data, function (item) {
                                return item;
                            }));
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                },
                select: function (e, i) {
                    $("#idMedicine").val(i.item.id);
                    $("#medicineStock").val(i.item.stock);
                },
                minLength: 1
            });

            $("#btnAddMedicine").click(function () {

                var idMedicine = $("#idMedicine");
                var medicineName = $("#medicineName");
                var medicineStock = $("#medicineStock");
                var medicineDose = $("#medicineDose");
				var medicineAmount = $("#medicineAmount");
				var medicineRemarkUse = $("#medicineRemarkUse");

                //Get the reference of the Table's TBODY element.
                var tBody = $("#table-medicine > TBODY")[0];

                //Add Row.
                var row = tBody.insertRow(-1);

                //Add id cell.
                var cell = $(row.insertCell(-1));
                cell.html(idMedicine.val());
                cell.hide();
                //add nama obat
                cell = $(row.insertCell(-1));
                cell.html(medicineName.val());
                //add stok obat
                cell = $(row.insertCell(-1));
                cell.html(medicineStock.val());
                //add dosis obat
                cell = $(row.insertCell(-1));
                cell.html(medicineDose.val());
                //add jumlah obat
                cell = $(row.insertCell(-1));
                cell.html(medicineAmount.val());
				//add cara pakai obat
				cell = $(row.insertCell(-1));
				cell.html(medicineRemarkUse.val());

                //Add Button cell.
                cell = $(row.insertCell(-1));
                var btnRemove = $("<input />");
                btnRemove.attr("type", "button");
                btnRemove.attr("onclick", "Remove(this);");
                btnRemove.val("Remove");
                cell.append(btnRemove);

                //Clear the TextBoxes.
                idMedicine.val("");
                medicineName.val("");
                medicineStock.val("");
                medicineDose.val("");
				medicineAmount.val("");
				medicineRemarkUse.val("");
            });

            $("#btnAdd_ConcMedicine").click(function () {

                var Conc_idMedicine = $("#Conc_idMedicine");
                var Conc_medicineName = $("#Conc_medicineName");
                var Conc_medicineJenis = $("#Conc_medicineJenis");
                var Conc_medicineDose = $("#Conc_medicineDose");
                var Conc_medicineAmount = $("#Conc_medicineAmount");
				var Conc_medicineRemarkUse = $("#Conc_medicineRemarkUse");

                //Get the reference of the Table's TBODY element.
                var tBody = $("#tblConcMedicine > TBODY")[0];

                //Add Row.
                var row = tBody.insertRow(-1);

                //Add id cell.
                var cell = $(row.insertCell(-1));

                cell.html(Conc_idMedicine.val());
                cell.hide();
                //add nama obat
                cell = $(row.insertCell(-1));
                cell.html(Conc_medicineName.val());
                //add stok obat
                cell = $(row.insertCell(-1));
                cell.html(Conc_medicineJenis.val());
                //add dosis obat
                cell = $(row.insertCell(-1));
                cell.html(Conc_medicineDose.val());

                 cell = $(row.insertCell(-1));
                cell.html(Conc_medicineAmount.val());

				//add cara pakai obat
				cell = $(row.insertCell(-1));
				cell.html(Conc_medicineRemarkUse.val());

                //Add Button cell.
                cell = $(row.insertCell(-1));
                var btnRemove = $("<input />");
                btnRemove.attr("type", "button");
                btnRemove.attr("onclick", "RemoveConcMedicine(this);");
                btnRemove.val("Remove");
                cell.append(btnRemove);

                //Clear the TextBoxes.
                Conc_idMedicine.val("");
                Conc_medicineName.val("");
                Conc_medicineJenis.val("");
                Conc_medicineAmount.val("");
                Conc_medicineDose.val("");
				Conc_medicineRemarkUse.val("");
            });

            var injection = $("#medicineInjectionName");
            if (!injection.length) return;

            $("#medicineInjectionName").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '/Poli/AutoCompleteInjection/',
                        data: "{ 'prefix': '" + request.term + "'}",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        success: function (data) {
                            response($.map(data, function (item) {
                                return item;
                            }));
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                },
                select: function (e, i) {
                    $("#idMedicineInjection").val(i.item.id);
                    $("#medicineInjectionStock").val(i.item.stock);
                },
                minLength: 1
            });

            $("#btnAddMedicineInjection").click(function () {

                var idMedicine = $("#idMedicineInjection");
                var medicineName = $("#medicineInjectionName");
                var medicineStock = $("#medicineInjectionStock");
                var volumeobat = $("#medicineInjectionVolume");

                //Get the reference of the Table's TBODY element.
                var tBody = $("#table-injection > TBODY")[0];

                //Add Row.
                var row = tBody.insertRow(-1);

                //Add id cell.
                var cell = $(row.insertCell(-1));
                cell.html(idMedicine.val());
                cell.hide();
                //add nama obat
                cell = $(row.insertCell(-1));
                cell.html(medicineName.val());
                //add stok obat
                cell = $(row.insertCell(-1));
                cell.html(medicineStock.val());
                //add volume obat
                cell = $(row.insertCell(-1));
                cell.html(volumeobat.val());

                //Add Button cell.
                cell = $(row.insertCell(-1));
                var btnRemove = $("<input />");
                btnRemove.attr("type", "button");
                btnRemove.attr("onclick", "RemoveInjection(this);");
                btnRemove.val("Remove");
                cell.append(btnRemove);

                //Clear the TextBoxes.
                idMedicine.val("");
                medicineName.val("");
                medicineStock.val("");
                volumeobat.val("");
            });

            var service = $("#serviceName");
            if (!service.length) return;

            $("#serviceName").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '/Poli/AutoCompleteService/',
                        data: "{ 'poliID': '"+ '@Model.LoketData.PoliToID' +"', 'prefix': '" + request.term + "'}",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        success: function (data) {
                            response($.map(data, function (item) {
                                return item;
                            }));
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                },
                select: function (e, i) {
                    $("#idService").val(i.item.id);
                    $("#serviceCode").val(i.item.code);
                    $("#servicePrice").val(i.item.stock);
                },
                minLength: 1
            });

            $("#btnAddService").click(function () {

                var idService = $("#idService");
                var serviceName = $("#serviceName");
                var serviceCode = $("#serviceCode");
                var servicePrice = $("#servicePrice");

                //Get the reference of the Table's TBODY element.
                var tBody = $("#table-service > TBODY")[0];

                //Add Row.
                var row = tBody.insertRow(-1);

                //Add id cell.
                var cell = $(row.insertCell(-1));
                cell.html(idService.val());
                cell.hide();
                //add service name
                cell = $(row.insertCell(-1));
                cell.html(serviceName.val());
                //add service code
                cell = $(row.insertCell(-1));
                cell.html(serviceCode.val());
                //add service price
                cell = $(row.insertCell(-1));
                cell.html(servicePrice.val());

                //Add Button cell.
                cell = $(row.insertCell(-1));
                var btnRemove = $("<input />");
                btnRemove.attr("type", "button");
                btnRemove.attr("onclick", "RemoveService(this);");
                btnRemove.val("Remove");
                cell.append(btnRemove);

                //Clear the TextBoxes.
                idService.val("");
                serviceName.val("");
                serviceCode.val("");
                servicePrice.val("");
            });

            var laborat = $("#laboratName");
            if (!laborat.length) return;

            $("#laboratName").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '/Poli/AutoCompleteLaborat/',
                        data: "{ 'formMedicalID': '"+ '@Model.LoketData.FormMedicalID' +"', 'prefix': '" + request.term + "'}",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        success: function (data) {
                            response($.map(data, function (item) {
                                return item;
                            }));
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                },
                select: function (e, i) {
                    $("#idLaborat").val(i.item.id);
                    //$("#laboratResult").val(i.item.value);
                },
                minLength: 1
            });

            $("#btnAddLab").click(function () {

                var idLab = $("#idLaborat");
                var labName = $("#laboratName");
                var labResult = $("#laboratResult");

                //Get the reference of the Table's TBODY element.
                var tBody = $("#table-lab > TBODY")[0];

                //Add Row.
                var row = tBody.insertRow(-1);

                //Add id cell.
                var cell = $(row.insertCell(-1));
                cell.html(idLab.val());
                cell.hide();
                //add lab name
                cell = $(row.insertCell(-1));
                cell.html(labName.val());
                //add lab result
                cell = $(row.insertCell(-1));
                cell.html(labResult.val());

                //Add Button cell.
                cell = $(row.insertCell(-1));
                var btnRemove = $("<input />");
                btnRemove.attr("type", "button");
                btnRemove.attr("onclick", "RemoveLab(this);");
                btnRemove.val("Remove");
                cell.append(btnRemove);

                //Clear the TextBoxes.
                idLab.val("");
                labName.val("");
                labResult.val("");
            });

            var radiology = $("#radiologyName");
            if (!radiology.length) return;

            $("#radiologyName").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '/Poli/AutoCompleteRadiology/',
                        data: "{ 'formMedicalID': '"+ '@Model.LoketData.FormMedicalID' +"', 'prefix': '" + request.term + "'}",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        success: function (data) {
                            response($.map(data, function (item) {
                                return item;
                            }));
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                },
                select: function (e, i) {
                    $("#idRadiology").val(i.item.id);
                    //$("#radiologyResult").val(i.item.value);
                },
                minLength: 1
            });

            $("#btnAddRadiology").click(function () {

                var idRadiology = $("#idRadiology");
                var radiologyName = $("#radiologyName");
                var radiologyResult = $("#radiologyResult");

                //Get the reference of the Table's TBODY element.
                var tBody = $("#table-radiology > TBODY")[0];

                //Add Row.
                var row = tBody.insertRow(-1);

                //Add id cell.
                var cell = $(row.insertCell(-1));
                cell.html(idRadiology.val());
                cell.hide();
                //add lab name
                cell = $(row.insertCell(-1));
                cell.html(radiologyName.val());
                //add lab result
                cell = $(row.insertCell(-1));
                cell.html(radiologyResult.val());

                //Add Button cell.
                cell = $(row.insertCell(-1));
                var btnRemove = $("<input />");
                btnRemove.attr("type", "button");
                btnRemove.attr("onclick", "RemoveRadiology(this);");
                btnRemove.val("Remove");
                cell.append(btnRemove);

                //Clear the TextBoxes.
                idRadiology.val("");
                radiologyName.val("");
                radiologyResult.val("");
            });

            $("#ddlpolito").change(function () {
                $.get("/Loket/GetDoctorList", { PoliId: $("#ddlpolito").val() }, function (data) {
                    $("#ddldoctor").empty();

                    var lbl = document.getElementById("lbDoctor");
                    var tb = document.getElementById("ddldoctor");

                    if (data.length == 0) {
                        lbl.style.display = "none";
                        tb.style.display = "none";
                    } else {
                        lbl.style.display = "block";
                        tb.style.display = "block";
                    }

                    $.each(data, function (index, row) {
                        $("#ddldoctor").append('<option value="' + row.ID + '">' + row.Name + '</option>');
                    });
                });
            });

            toastr.options = {
                "closeButton": true,
                "positionClass": "toast-top-full-width",
                "onclick": null,
                "showDuration": "0",
                "hideDuration": "0",
                "timeOut": "0",
                "showMethod": "fadeIn"
        };

        if (_isViewOnly == true || _isViewOnly == "true") {
            $('#btnSave').css('visibility', 'hidden');
        }
        else {
             $('#btnSave').css('visibility', 'visible');
        }

			$('#btnSave').click(function () {
				$('#btnSave').attr('disabled', 'disabled');
                var formExamineID = $('#formExamineID').val();
                var loketID = $('#loketID').val();
                var anamnesa = $('#txtAnamnesa').val();
                var diagnose = $('#txtDiagnose').val();
                var therapy = $('#txtTherapy').val();
                var receipt = $('#txtConcoction').val();
                var finalState = $('#ddlfinalstate').val();
                var poliToID = $('#ddlpolito').val();
                var doctorToID = $('#ddldoctor').val();
                var icdinfo1 = $('#ddlicd1').val();
                var icdinfo2 = $('#ddlicd2').val();
                var icdinfo3 = $('#ddlicd3').val();
                var needsuratsakit = $('#cbNeedSurat').val();
                var jumhari = $('#tbJumHari').val();

                var concoctionmedicineList = [];
                $('#tblConcMedicine tbody tr').each(function () {
                    var name = $(this).find('td').eq(1).text().trim();
                    var jenis = $(this).find('td').eq(2).text().trim();
                    var dose = $(this).find('td').eq(3).text().trim();
                    var amount = $(this).find('td').eq(4).text().trim();
					var remark = $(this).find('td').eq(5).text().trim();
					var row = name + "|" + dose + "|" + jenis + "|" + remark+"|"+amount;
                    concoctionmedicineList.push(row);
                });

                var medicineList = [];
                $('#table-medicine tbody tr').each(function () {
                    var id = $(this).find('td').eq(0).text().trim();
                    var dose = $(this).find('td').eq(3).text().trim();
					var amount = $(this).find('td').eq(4).text().trim();
					var remark = $(this).find('td').eq(5).text().trim();
					var row = id + "|" + dose + "|" + amount + "|" + remark;
                    medicineList.push(row);
                });

                var injectionList = [];
                $('#table-injection tbody tr').each(function () {
                    var id = $(this).find('td').eq(0).text().trim();
                    var medicine = $(this).find('td').eq(1).text().trim();
                    var volume = $(this).find('td').eq(2).text().trim();
                    var row = id + "|" + medicine + "|" + volume;
                    injectionList.push(row);
                });

                var labIdList = [];
                $('#table-lab tbody tr').each(function () {
                    var id = $(this).find('td').eq(0).text().trim();
                    labIdList.push(id);
                });

                var radiologyIdList = [];
                $('#table-radiology tbody tr').each(function () {
                    var id = $(this).find('td').eq(0).text().trim();
                    radiologyIdList.push(id);
                });

                var serviceIdList = [];
                $('#table-service tbody tr').each(function () {
                    var id = $(this).find('td').eq(0).text().trim();
                    serviceIdList.push(id);
                });

                var DataModel = {
                    formExamineID: formExamineID,
                    loketID: loketID,
                    anamnesa: anamnesa,
                    diagnose: diagnose,
                    therapy: therapy,
                    receipt: receipt,
                    finalState: finalState,
                    icdInformation: icdinfo1 + '|' + icdinfo2 + '|' + icdinfo3,
                    needSurat: needsuratsakit,
                    jumHari:jumhari,
                    poliToID: poliToID,
                    doctorToID: doctorToID,
                    concoctionMedicineList: concoctionmedicineList,
                    medicineList: medicineList,
                    injectionList: injectionList,
                    labList: labIdList,
                    radiologyList: radiologyIdList,
                    serviceList: serviceIdList
                };

                $.ajax({
                    url: '@Url.Action("FormExamine","Poli")',
                    type: 'POST',
                    data: DataModel,
                    success: function (result) {
                        if (result.Status) {
                            toastr.options.closeButton = false;
                            toastr.options.timeOut = 2000;
                            toastr.success(result.Message);
                        }
                        else {
                            toastr.error(result.Message);
                        }
                    }
                });
            });


        });
    </script>
</body>
</html>


